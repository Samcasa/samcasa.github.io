<!DOCTYPE html>
<html>

<head>
  <meta http-equiv="Content-Type" content="text/html" charset="UTF-8" >
  <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1"/>
  <title>mysql学习篇--记录一些命令 | MATRIX</title>
  <meta name="description" content="" />
  <meta name="HandheldFriendly" content="True" />
  <meta name="MobileOptimized" content="320" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />

  <link rel="stylesheet" type="text/css" href="/css/screen.css" />
  <link rel="stylesheet" type="text/css" href="//fonts.googleapis.com/css?family=Noto+Serif:400,700,400italic|Open+Sans:700,400" />

  <meta name="generator" content="MATRIX">

  
  
  <link rel="alternate" type="application/atom+xml" title="Atom 0.3" href="atom.xml">
  
  

  
</head>


<body class="post-template">

  <header class="site-head"  style="background-image: url(//blog.ghost.org/content/images/2013/Nov/cover.png)" >
    <div class="vertical">
        <div class="site-head-content inner">
             <a class="blog-logo" href="/"><img src="//blog.ghost.org/content/images/2013/Nov/bloglogo_1-1.png" alt="Blog Logo"/></a> 
            <h1 class="blog-title">MATRIX</h1>
            <h2 class="blog-description"></h2>
        </div>
    </div>
</header>
  

<main class="content" role="main">
  <article class="post">
    <span class="post-meta">
      <time datetime="2017-09-15T16:00:00.000Z" itemprop="datePublished">
          2017-09-16
      </time>
    
    
    | 
    <a href='/tags/Mysql/'>Mysql</a>
    
    
</span>
    <h1 class="post-title">mysql学习篇--记录一些命令</h1>
    <section class="post-content">
      <p>mysql是一种关系型数据库，现在流行的服务器缓存策略是先访问一次非关系型数据库比如MongoDB,有现成的数据则直接json返回，没有的话再去关系型数据库查一下，现在记录一下mysql用到的命令，环境是ubuntu16.04LTS.<br><a id="more"></a><br><strong>第一部分：安装篇</strong></p>
<p>1.mysql安装</p>
<blockquote>
<p>sudo apt-get install mysql-server mysql-client</p>
</blockquote>
<p>根据提示输入密码和确认密码</p>
<p>2.检验安装是否成功，成功则显示mysql的版本号</p>
<blockquote>
<p>mysql –version</p>
<p>service mysql start //启动服务</p>
<p>service mysql stop //停止服务</p>
<p>service mysql restart //服务重启</p>
</blockquote>
<p>3.允许远程链接数据库</p>
<blockquote>
<p>cd  /etc/mysql/mysql.conf.d</p>
<p>sudo gedit mysqld.cnf</p>
</blockquote>
<p>将bind-address=127.0.0.1 注释后，登录mysql,执行</p>
<blockquote>
<p>mysql -uroot -p　//登录mysql,输入密码</p>
<p>mysql&gt; grant all privileges on <em>.</em> to ‘root’@’%’ identified by ‘mysql’ with grant option;</p>
<p>mysql&gt; flush privileges</p>
<p>service mysql restart</p>
</blockquote>
<p>4.现在试一下，找一个win主机或打开虚拟机，下载navicat,地址：<a href="https://pan.baidu.com/s/1pLuSoJ5" target="_blank" rel="external">https://pan.baidu.com/s/1pLuSoJ5</a><br>打开后输入ubuntu 的ip地址，mysql数据库用户名和密码．远程连接成功后即可看到在你电脑上的数据库.</p>
<p><strong>第二部分：基础命令入门篇</strong></p>
<p>1.数据库登陆，退出</p>
<blockquote>
<p>mysql -uroot -p　 //登录数据库</p>
<p>quit(exit) 　//退出</p>
</blockquote>
<p>2.创建一个数据库并展示</p>
<blockquote>
<p>create database NewTab charset=utf8;</p>
<p>show databases;<br><img src="http://img.blog.csdn.net/20170914153655406?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQvc2FtY2FzYQ==/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/Center" alt=""></p>
</blockquote>
<p>3.使用一个数据库并查看和创建一张表</p>
<blockquote>
<p>mysql&gt; use NewTab;</p>
<p>mysql&gt; show tables；</p>
<p>mysql&gt; create table students(id int auto_increment primary key not null,name varchar(10) not null,gendar varchar(1) not null,isDelete varchar(1) not null);</p>
</blockquote>
<p><img src="http://img.blog.csdn.net/20170914154024052?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQvc2FtY2FzYQ==/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/Center" alt=""></p>
<p>4.插入数据并更新</p>
<blockquote>
<p>mysql&gt; insert into students (id,name,gendar,isDelete) values(‘0’,’jim’,1,0),(‘0’,’ken’,2,1);</p>
<p>mysql&gt; update students set gendar=1 where isDelete==1;</p>
</blockquote>
<p><img src="http://img.blog.csdn.net/20170914155641611?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQvc2FtY2FzYQ==/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/Center" alt=""></p>
<p>5.逻辑删除</p>
<blockquote>
<p>mysql&gt; select * from students where isDelete=0;</p>
</blockquote>
<p><img src="http://img.blog.csdn.net/20170914155847663?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQvc2FtY2FzYQ==/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/Center" alt=""></p>
<p>6.条件查询</p>
<blockquote>
<p>mysql&gt; select * from students where id&gt;2 and gendar=1 or name=’lily’;</p>
</blockquote>
<p><img src="http://img.blog.csdn.net/20170914160935654?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQvc2FtY2FzYQ==/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/Center" alt=""></p>
<p>7.模糊查询</p>
<blockquote>
<p>mysql&gt; select * from students where name like ‘j%’;</p>
</blockquote>
<p><img src="http://img.blog.csdn.net/20170914161016761?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQvc2FtY2FzYQ==/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/Center" alt=""></p>
<p>8.分组查询</p>
<blockquote>
<p>mysql&gt; select gendar as sex,count(*) from students group by gendar having gendar=1;</p>
</blockquote>
<p><img src="http://img.blog.csdn.net/20170914162426053?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQvc2FtY2FzYQ==/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/Center" alt=""></p>
<p>where是对from后面指定的表进行数据筛选，属于对原始数据的筛选</p>
<p>having是对group by的结果进行筛选</p>
<p>9.排序查询</p>
<blockquote>
<p>mysql&gt; select * from students order by isDelete asc;</p>
<p>mysql&gt; select * from students order by isDelete desc;</p>
</blockquote>
<p><img src="http://img.blog.csdn.net/20170914163438489?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQvc2FtY2FzYQ==/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/Center" alt=""></p>
<p>10.复合查询</p>
<blockquote>
<p>mysql&gt; select gendar,name from students where id&gt;1 group by gendar,name having gendar=1 order by gendar desc limit 1,2;</p>
</blockquote>
<p><strong>第三部分：提高篇</strong></p>
<p>有三个表结构如下：</p>
<p><img src="http://img.blog.csdn.net/20170915115601766?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQvc2FtY2FzYQ==/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/Center" alt=""></p>
<p>1.查询姓名，学科，分数,连接查询</p>
<blockquote>
<p>mysql&gt; select students.name,subjects.subject,scores.score from scores inner join students on students.id=scores.sname  inner join subjects on subjects.sid=scores.ssub;</p>
</blockquote>
<p><img src="http://img.blog.csdn.net/20170915131148792?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQvc2FtY2FzYQ==/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/Center" alt=""></p>
<p>2.查询每个学生的平均分，总分</p>
<blockquote>
<p>mysql&gt; select students.name,avg(scores.score) from scores inner join students on students.id=scores.sname group by students.name;</p>
</blockquote>
<p>3.查询单个科目最高分和最低分</p>
<blockquote>
<p>mysql&gt; select subjects.subject as subject,max(scores.score),min(scores.score) from scores inner  join subjects on subjects.sid=scores.ssub group by subjects.subject;</p>
</blockquote>
<p><img src="http://img.blog.csdn.net/20170915131734827?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQv/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/Center" alt=""></p>
<p>4.创建一个视图</p>
<blockquote>
<p>mysql&gt; create view stu_sub_sco as select students.*,scores.score,subjects.subject from scores inner join students on students.id=scores.sname inner join subjects on subjects.sid=scores.ssub;</p>
</blockquote>
<p><img src="http://img.blog.csdn.net/20170915133837633?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQvc2FtY2FzYQ==/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/Center" alt=""></p>
<p>5.修改一个视图</p>
<blockquote>
<p>mysql&gt; alter view stu_sub_sco as select students.*,scores.score,subjects.subject from scores inner join students on students.id=scores.sname inner join subjects on subjects.sid=scores.ssub where isDelete=0;</p>
</blockquote>
<p><img src="http://img.blog.csdn.net/20170915134043513?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQvc2FtY2FzYQ==/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/Center" alt=""></p>
<p>6.创建外键</p>
<blockquote>
<p>mysql&gt; create table infoscores( id int primary key auto_increment not null, studentid int, subjectid int, score int not null, foreign key(studentid) references students(id),foreign key(subjectid) references subjects(id));</p>
</blockquote>
<p>创建外键有两点：</p>
<p>1.数据库引擎必须一致．</p>
<p>2.引用主键且类型长度一致．</p>

    </section>
    <footer class="post-footer">
      <section class="author">
    <h4>sam</h4>
    <p>A designer, developer and entrepreneur. Spends his time travelling the world with a bag of kites. Likes journalism and publishing platforms.</p>
</section>
      <section class="share">
    <h4>Share this post</h4>
    <a class="icon-twitter" href="http://twitter.com/share?url=http://yoursite.com/2017/09/16/mysql20179/"
       onclick="window.open(this.href, 'twitter-share', 'width=550,height=235');return false;">
        <span class="hidden">Twitter</span>
    </a>
    <a class="icon-facebook" href="https://www.facebook.com/sharer/sharer.php?u=http://yoursite.com/2017/09/16/mysql20179/"
       onclick="window.open(this.href, 'facebook-share','width=580,height=296');return false;">
        <span class="hidden">Facebook</span>
    </a>
    <a class="icon-google-plus" href="https://plus.google.com/share?url=http://yoursite.com/2017/09/16/mysql20179/"
       onclick="window.open(this.href, 'google-plus-share', 'width=490,height=530');return false;">
        <span class="hidden">Google+</span>
    </a>
</section>
    </footer>
  </article>
  <nav class="pagination" role="pagination">
    
    <a class="newer-posts" href="/2017/10/06/proxy201710/">
        ← Java动态代理,静态代理和Python装饰器
    </a>
    
    <span class="page-number">•</span>
    
    <a class="older-posts" href="/2017/08/03/leshi/">
        乐视手机报出Erro:cameraFramwork 100错误 →
    </a>
    
</nav>
  <div id="comment" class="comments-area">
    <h1 class="title"><a href="#disqus_comments" name="disqus_comments">Comments</a></h1>

    
</div>
</main>


  
<footer class="site-footer">
  
  <a class="subscribe icon-feed" href="atom.xml"><span class="tooltip">Subscribe!</span></a>
  
  <div class="inner">
     <section class="copyright">All content copyright <a href="/">MATRIX</a> &copy; 2014 &bull; All rights reserved.</section>
     <section class="poweredby">Proudly published with <a class="icon-ghost" href="http://zespia.tw/hexo/">Hexo</a></section>
  </div>
</footer>

  <script src="//ajax.googleapis.com/ajax/libs/jquery/2.0.3/jquery.min.js"></script>

<script type="text/javascript" src="/js/jquery.fitvids.js"></script>
<script type="text/javascript" src="/js/index.js"></script>






</body>
</html>
